syntax = "proto3";
package social;
option go_package = "github.com/Yvo237/Anix-contract/proto/social;socialpb";

message Message {
  string id = 1;
  string thread_id = 2;
  string sender_id = 3;
  string content = 4;
  int64 timestamp = 5;
}

message Thread {
  string id = 1;
  repeated string participant_ids = 2;
}

message SendMessageRequest {
  string thread_id = 1;
  string sender_id = 2;
  string content = 3;
}

message SendMessageResponse {
  Message message = 1;
}

message ListMessagesRequest {
  string thread_id = 1;
  int32 page = 2;
  int32 page_size = 3;
}

message ListMessagesResponse {
  repeated Message messages = 1;
}

message GetThreadRequest {
  string thread_id = 1;
}

message GetThreadResponse {
  Thread thread = 1;
}

service MessagingService {
  rpc SendMessage(SendMessageRequest) returns (SendMessageResponse);
  rpc ListMessages(ListMessagesRequest) returns (ListMessagesResponse);
  rpc GetThread(GetThreadRequest) returns (GetThreadResponse);
}
